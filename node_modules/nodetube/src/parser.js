const WATCH_HTML_PATTERNS = [
  /;ytplayer\.config\s*=\s*({.*?});/,
  /;ytplayer\.config\s*=\s*({.+?});ytplayer/,
  /;yt\.setConfig\(\{'PLAYER_CONFIG':\s*({.*})}\);/,
  /;yt\.setConfig\(\{'PLAYER_CONFIG':\s*({.*})(,'EXPERIMENT_FLAGS'|;)/,
];

const VIDEO_ID_PATTERN = /(?:v=|\/)([0-9A-Za-z_-]{11}).*/;

export function extractPlayerConfig(html) {
  for (const pattern of WATCH_HTML_PATTERNS) {
    const matched = html.match(pattern);
    if (matched) {
      return JSON.parse(matched[1]);
    }
  }
}

export function extractVideoId(url) {
  return url.match(VIDEO_ID_PATTERN)[1];
}
